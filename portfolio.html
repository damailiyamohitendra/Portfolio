<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brofic - Portfolio</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    /* small inline helpers (move to style.css if you prefer) */
    .sale-badge{position:absolute;top:10px;left:10px;background:linear-gradient(90deg,#ff2f5a,#ff0f4a);color:#fff;padding:6px 10px;font-weight:800;font-size:12px;border-radius:999px;box-shadow:0 6px 20px rgba(244,1,54,0.18);z-index:6;letter-spacing:0.2px}
    .price-block{display:flex;gap:10px;align-items:center;justify-content:flex-end;min-width:120px}
    .mrp{text-decoration:line-through;color:rgba(255,255,255,0.6);font-weight:600;font-size:13px}
    .curr-price{color:#f40136;font-weight:800;font-size:15px}
    .fig-bottom{display:flex;align-items:center;justify-content:space-between;width:100%}
    /* basic hidden helper */
    .hidden { display: none !important; }
  </style>
</head>
<body>

<header>
  <a href="index.html" class="logo"><img src="assets/images/logo.png" alt="Brofic Logo"></a>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="portfolio.html">Portfolio</a></li>
      <li><a href="order.html">Order</a></li>
      <li><a href="feedback.html">Feedback</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
</header>

<!-- cursor trail container: add this right after <header> in every page -->
<div id="trail" class="trail"></div>

<!-- include script before closing </body> -->
<script src="js/cursor-trail.js" defer></script>


<section id="portfolio">
  <h2 class="section-title">Our Portfolio</h2>

  <!-- Category tabs -->
  <div class="portfolio-tabs" role="tablist" aria-label="Portfolio categories">
    <button class="tab active" data-cat="all" role="tab" aria-selected="true">All</button>
    <button class="tab" data-cat="brand" role="tab">Brand Logos</button>
    <button class="tab" data-cat="wedding" role="tab">Wedding Invitations</button>
    <button class="tab" data-cat="poster" role="tab">Event Posters</button>
    <button class="tab" data-cat="video" role="tab">Digital Portrait</button>
  </div>

  <!-- Grid -->
  <div class="portfolio-grid" id="portfolioGrid">

    <!-- Brand Logos -->
    <figure class="media-card" data-type="image" data-src="images/brand1.jpg" data-cat="brand" data-price="999" data-mrp="1999" data-currency="₹">
      <img src="assets/images/dv1.jpg" alt="Brand Logo 1" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">dcrrrrvrrrrgvcgjhedbhccdhdddd</span>
          <div class="price-block">
            <span class="mrp" aria-hidden="true"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <figure class="media-card" data-type="image" data-src="images/brand2.jpg" data-cat="brand" data-price="1299" data-mrp="1999" data-currency="₹">
      <img src="assets/images/dv1.jpg" alt="Brand Logo 2" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Brand Logo — 2</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <!-- Wedding Invitations -->
    <figure class="media-card" data-type="image" data-src="images/wedding1.jpg" data-cat="wedding" data-price="1299" data-mrp="3499" data-currency="₹">
      <img src="images/wedding1_thumb.jpg" alt="Wedding Invite 1" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Wedding Invite — 1</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <figure class="media-card" data-type="image" data-src="images/wedding2.jpg" data-cat="wedding" data-price="1499" data-mrp="2999" data-currency="₹">
      <img src="images/wedding2_thumb.jpg" alt="Wedding Invite 2" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Wedding Invite — 2</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <figure class="media-card" data-type="image" data-src="images/wedding3.jpg" data-cat="wedding" data-price="1399" data-mrp="1999" data-currency="₹">
      <img src="images/wedding3_thumb.jpg" alt="Wedding Invite 3" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Karishmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa ♥ Prabhat wedding</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <!-- Posters -->
    <figure class="media-card" data-type="image" data-src="images/poster1.jpg" data-cat="poster" data-price="499" data-mrp="799" data-currency="₹">
      <img src="images/poster1_thumb.jpg" alt="Event Poster 1" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Event Poster — 1</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <figure class="media-card" data-type="image" data-src="images/poster2.jpg" data-cat="poster" data-price="599" data-mrp="899" data-currency="₹">
      <img src="images/poster2_thumb.jpg" alt="Event Poster 2" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Event Poster — 2</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

    <!-- Digital Portrait / Video -->
    <figure class="media-card" data-type="video" data-src="assets/videos/raj.mp4" data-cat="video" data-price="2499" data-mrp="4999" data-currency="₹">
      <img src="assets/images/dv1.jpg" alt="Digital Portrait 1" loading="lazy">
      <figcaption>
        <div class="fig-bottom">
          <span class="title">Digitalllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll Portrait — 1</span>
          <div class="price-block">
            <span class="mrp"></span>
            <span class="curr-price"></span>
          </div>
        </div>
      </figcaption>
    </figure>

  </div>
</section>

<!-- Lightbox -->
<div id="lightbox" class="lightbox" aria-hidden="true">
  <button class="lb-close" id="lbClose" aria-label="Close">✕</button>
  <div class="lb-content" id="lbContent"></div>
  <button class="lb-prev" id="lbPrev" aria-label="Previous">◀</button>
  <button class="lb-next" id="lbNext" aria-label="Next">▶</button>
</div>

<footer class="simple-footer">
  <p>© <span id="year"></span> Brofic | All Rights Reserved</p>
  <div class="footer-icons">
    <a href="https://facebook.com/" target="_blank" aria-label="Facebook">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.597 0 0 .597 0 1.325v21.351C0 23.403.597 24 1.325 24h11.495v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.312h3.587l-.467 3.622h-3.12V24h6.116C23.403 24 24 23.403 24 22.676V1.325C24 .597 23.403 0 22.675 0z"/></svg> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
        <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
      </svg>
    </a>

    <a href="https://twitter.com/" target="_blank" aria-label="Twitter">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M24 4.557a9.83 9.83 0 01-2.828.775 4.932 4.932 0 002.165-2.724c-.951.564-2.005.974-3.127 1.195a4.918 4.918 0 00-8.384 4.482A13.939 13.939 0 011.671 3.149a4.822 4.822 0 001.523 6.573 4.903 4.903 0 01-2.229-.616v.061a4.923 4.923 0 003.946 4.827 4.902 4.902 0 01-2.224.084 4.933 4.933 0 004.604 3.417A9.867 9.867 0 010 19.54a13.905 13.905 0 007.548 2.212c9.056 0 14.01-7.514 14.01-14.01 0-.213-.005-.425-.014-.636A10.012 10.012 0 0024 4.557z"/></svg> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
        <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334q.002-.211-.006-.422A6.7 6.7 0 0 0 16 3.542a6.7 6.7 0 0 1-1.889.518 3.3 3.3 0 0 0 1.447-1.817 6.5 6.5 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.32 9.32 0 0 1-6.767-3.429 3.29 3.29 0 0 0 1.018 4.382A3.3 3.3 0 0 1 .64 6.575v.045a3.29 3.29 0 0 0 2.632 3.218 3.2 3.2 0 0 1-.865.115 3 3 0 0 1-.614-.057 3.28 3.28 0 0 0 3.067 2.277A6.6 6.6 0 0 1 .78 13.58a6 6 0 0 1-.78-.045A9.34 9.34 0 0 0 5.026 15"/>
      </svg>
    </a>

    <a href="https://instagram.com/" target="_blank" aria-label="Instagram">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.849.07 1.366.062 2.633.35 3.608 1.325.975.975 1.262 2.242 1.324 3.608.058 1.265.069 1.645.069 4.849s-.011 3.584-.069 4.849c-.062 1.366-.349 2.633-1.324 3.608-.975.975-2.242 1.262-3.608 1.324-1.265.058-1.645.069-4.849.069s-3.584-.011-4.849-.069c-1.366-.062-2.633-.349-3.608-1.324-.975-.975-1.262-2.242-1.324-3.608C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.849c.062-1.366.349-2.633 1.324-3.608.975-.975 2.242-1.262 3.608-1.324C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.741 0 8.332.014 7.052.072 5.771.13 4.56.428 3.533 1.455 2.506 2.482 2.208 3.693 2.15 4.974.014 8.332 0 8.741 0 12c0 3.259.014 3.668.072 4.948.058 1.281.356 2.492 1.383 3.519 1.027 1.027 2.238 1.325 3.519 1.383 1.28.058 1.689.072 4.948.072s3.668-.014 4.948-.072c1.281-.058 2.492-.356 3.519-1.383 1.027-1.027 1.325-2.238 1.383-3.519.058-1.28.072-1.689.072-4.948 0-3.259-.014-3.668-.072-4.948-.058-1.281-.356-2.492-1.383-3.519C19.44.428 18.229.13 16.948.072 15.668.014 15.259 0 12 0z"/><path d="M12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm0 10.162a4 4 0 110-8 4 4 0 010 8z"/><circle cx="18.406" cy="5.594" r="1.44"/></svg> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
        <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
      </svg>
    </a>

    <a href="https://youtube.com/" target="_blank" aria-label="YouTube">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M23.498 6.186a2.965 2.965 0 00-2.088-2.099C19.691 3.5 12 3.5 12 3.5s-7.691 0-9.41.587a2.965 2.965 0 00-2.088 2.099C0 7.905 0 12 0 12s0 4.095.502 5.814a2.965 2.965 0 002.088 2.099C4.309 20.5 12 20.5 12 20.5s7.691 0 9.41-.587a2.965 2.965 0 002.088-2.099C24 16.095 24 12 24 12s0-4.095-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16">
        <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2zM6.4 5.209v4.818l4.157-2.408z"/>
      </svg>
    </a>

    <a href="https://linkedin.com/" target="_blank" aria-label="LinkedIn">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M4.98 3.5a2.5 2.5 0 11.001 5.001A2.5 2.5 0 014.98 3.5zM3 9h4v12H3V9zm7 0h3.7v1.6h.1c.5-.9 1.7-1.8 3.6-1.8 3.9 0 4.6 2.5 4.6 5.8V21h-4v-5.7c0-1.4 0-3.3-2-3.3-2 0-2.3 1.6-2.3 3.1V21H10V9z"/></svg> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
      </svg>
    </a>

    <a href="https://wa.me/917897534153" target="_blank" aria-label="WhatsApp">
      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M20.52 3.48A11.8 11.8 0 0012 .2a11.8 11.8 0 00-8.52 3.28A11.8 11.8 0 00.2 12c0 2.07.54 4.1 1.56 5.88L0 24l6.25-1.64A11.8 11.8 0 0012 23.8a11.8 11.8 0 008.52-3.28A11.8 11.8 0 0023.8 12c0-3.18-1.24-6.18-3.28-8.52zM12 21.6c-1.84 0-3.64-.5-5.2-1.46l-.37-.22-3.7.97.99-3.6-.24-.38A9.59 9.59 0 012.4 12a9.6 9.6 0 0119.2 0c0 5.3-4.3 9.6-9.6 9.6zm5.2-7.26c-.28-.14-1.65-.82-1.9-.91-.25-.1-.43-.14-.61.14-.18.27-.7.91-.86 1.09-.16.18-.32.2-.6.07-.28-.14-1.17-.43-2.23-1.38a8.42 8.42 0 01-1.6-1.97c-.17-.28-.02-.43.13-.57.13-.13.28-.32.42-.48.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.48-.07-.14-.61-1.47-.83-2.01-.22-.52-.44-.45-.61-.46h-.52c-.18 0-.47.07-.72.34-.25.27-.95.93-.95 2.26s.98 2.63 1.12 2.81c.14.18 1.93 2.95 4.67 4.14.65.28 1.16.45 1.56.58.65.21 1.24.18 1.71.11.52-.08 1.65-.67 1.88-1.31.23-.64.23-1.19.16-1.31-.07-.12-.25-.2-.53-.34z"/></svg> -->
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
      <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/>
    </svg>
    </a>
  </div>
</footer>

<script>
  // set copyright year
  document.getElementById("year").textContent = new Date().getFullYear();

  // Highlight current page link
  (function highlightActiveNav(){
    const links = document.querySelectorAll('nav ul li a');
    let current = window.location.pathname.split('/').pop();
    if (!current) current = 'index.html';
    links.forEach(a => {
      const href = a.getAttribute('href').split('/').pop();
      a.classList.toggle('active', href === current);
    });
  })();
</script>

<script>
/* ------------- dynamic price & sale badge logic ------------- */
(function(){
  function formatCurrency(currSymbol, value) {
    return (currSymbol || '₹') + Number(value).toLocaleString('en-IN');
  }

  function calcDiscount(mrp, price) {
    if (!mrp || mrp <= price) return 0;
    const pct = Math.round((1 - (price / mrp)) * 100);
    return pct > 0 ? pct : 0;
  }

  // parse numbers (allow strings like "1,299" too)
  const parseNum = s => {
    if (s === undefined || s === null || s === '') return null;
    const n = Number(String(s).replace(/[,₹\s]/g, ''));
    return Number.isFinite(n) ? n : null;
  };

  document.querySelectorAll('.media-card').forEach(card => {
    const price = parseNum(card.dataset.price);
    const mrp = parseNum(card.dataset.mrp);
    const currency = card.dataset.currency || '₹';

    const mrpEl = card.querySelector('.mrp');
    const currEl = card.querySelector('.curr-price');

    if (price != null) {
      currEl.textContent = formatCurrency(currency, price);
    } else {
      currEl.textContent = '';
    }

    if (mrp != null && mrp > price) {
      mrpEl.textContent = formatCurrency(currency, mrp);
    } else {
      mrpEl.textContent = '';
    }

    const discount = (mrp != null && price != null) ? calcDiscount(mrp, price) : 0;

    if (discount > 0) {
      const badge = document.createElement('div');
      badge.className = 'sale-badge';
      badge.textContent = `Sale ${discount}% off`;
      card.appendChild(badge);
    }

    // accessibility: add aria-label summarizing price info
    let aria = card.querySelector('.title')?.textContent || 'Item';
    aria += price != null ? ` — price ${formatCurrency(currency, price)}` : '';
    aria += (mrp != null && mrp > price) ? `, MRP ${formatCurrency(currency, mrp)}, ${discount}% off` : '';
    card.setAttribute('aria-label', aria);
  });
})();

/* Portfolio filtering + lightbox navigation */
(function(){
  const tabs = Array.from(document.querySelectorAll('.portfolio-tabs .tab'));
  const cards = Array.from(document.querySelectorAll('.media-card'));
  const lightbox = document.getElementById('lightbox');
  const lbContent = document.getElementById('lbContent');
  const lbClose = document.getElementById('lbClose');
  const lbPrev = document.getElementById('lbPrev');
  const lbNext = document.getElementById('lbNext');

  let activeCategory = 'all';

  function applyFilter(cat){
    activeCategory = cat;
    cards.forEach(card => {
      const c = card.dataset.cat;
      if(cat === 'all' || c === cat){
        card.classList.remove('hidden');
      } else {
        card.classList.add('hidden');
      }
    });
    tabs.forEach(t => t.classList.toggle('active', t.dataset.cat === cat));
  }

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const cat = tab.dataset.cat;
      applyFilter(cat);
    });
  });

  function visibleCards(){
    return Array.from(document.querySelectorAll('.media-card:not(.hidden)'));
  }

  function openAtCard(card){
    const type = card.dataset.type;
    const src = card.dataset.src;
    const caption = card.querySelector('figcaption .title')?.textContent || '';

    lbContent.innerHTML = '';
    if(type === 'image'){
      const img = document.createElement('img');
      img.src = src;
      img.alt = caption;
      img.className = 'lb-media';
      lbContent.appendChild(img);
    } else if(type === 'video'){
      const video = document.createElement('video');
      video.controls = true;
      video.autoplay = true;
      video.className = 'lb-media';
      const s = document.createElement('source');
      s.src = src;
      video.appendChild(s);
      lbContent.appendChild(video);
    }
    lightbox.classList.add('open');
    lightbox.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
  }

  function getVisibleIndex(card){
    const v = visibleCards();
    return v.indexOf(card);
  }

  function openAtIndex(idx){
    const v = visibleCards();
    if(idx < 0 || idx >= v.length) return;
    openAtCard(v[idx]);
  }

  cards.forEach(card => {
    card.tabIndex = 0;
    card.addEventListener('click', () => {
      if(card.classList.contains('hidden')) return;
      const idx = getVisibleIndex(card);
      openAtIndex(idx);
    });
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' && !card.classList.contains('hidden')){
        const idx = getVisibleIndex(card);
        openAtIndex(idx);
      }
    });
  });

  function closeLB(){
    lightbox.classList.remove('open');
    lightbox.setAttribute('aria-hidden', 'true');
    lbContent.innerHTML = '';
    document.body.style.overflow = '';
  }

  function showPrev(){
    const v = visibleCards();
    if(!v.length) return;
    const currentSrc = lbContent.querySelector('.lb-media')?.getAttribute('src');
    let i = v.findIndex(c => c.dataset.src === currentSrc);
    if(i === -1) i = v.findIndex(c => c.querySelector('img')?.src === currentSrc);
    if(i > 0) openAtIndex(i - 1);
  }

  function showNext(){
    const v = visibleCards();
    if(!v.length) return;
    const currentSrc = lbContent.querySelector('.lb-media')?.getAttribute('src');
    let i = v.findIndex(c => c.dataset.src === currentSrc);
    if(i === -1) i = v.findIndex(c => c.querySelector('img')?.src === currentSrc);
    if(i < v.length - 1) openAtIndex(i + 1);
  }

  lbClose.addEventListener('click', closeLB);
  lbPrev.addEventListener('click', showPrev);
  lbNext.addEventListener('click', showNext);

  document.addEventListener('keydown', (e) => {
    if(!lightbox.classList.contains('open')) return;
    if(e.key === 'Escape') closeLB();
    if(e.key === 'ArrowLeft') showPrev();
    if(e.key === 'ArrowRight') showNext();
  });

  lightbox.addEventListener('click', (e) => {
    if(e.target === lightbox) closeLB();
  });

  applyFilter('all');

})();
</script>

</body>
</html>
